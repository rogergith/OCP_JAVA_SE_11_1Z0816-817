### USANDO STREAMS

Un stream en Java es una secuencia de datos. Una tubería de stream consiste en las operaciones que se ejecutan en un stream para producir un resultado. Primero veremos el flujo de las tuberías conceptualmente. Después de eso, realmente nos adentraremos en el código.

### COMPRENDIENDO EL FLUJO DE LA TUBERÍA

Piensa en una tubería de stream como una línea de ensamblaje en una fábrica. Supongamos que estamos operando una línea de ensamblaje para hacer letreros para las exhibiciones de animales en el zoológico. Tenemos una serie de trabajos. Es trabajo de una persona sacar letreros de una caja. Es trabajo de una segunda persona pintar el letrero. Es trabajo de una tercera persona estampar el nombre del animal en el letrero. Es trabajo de la última persona poner el letrero completado en una caja para ser llevado a la exhibición adecuada.

Observa que la segunda persona no puede hacer nada hasta que una señal haya sido sacada de la caja por la primera persona. De manera similar, la tercera persona no puede hacer nada hasta que un letrero haya sido pintado, y la última persona no puede hacer nada hasta que esté estampar.

La línea de ensamblaje para hacer letreros es finita. Una vez que procesamos el contenido de nuestra caja de letreros, terminamos. Los streams finitos tienen un límite. Otras líneas de ensamblaje esencialmente corren para siempre, como una de producción de alimentos. Por supuesto, se detienen en algún momento cuando la fábrica cierra, pero finge que eso no sucede. O piensa en un ciclo de amanecer/atardecer como infinito, ya que no termina por un período de tiempo inusualmente largo.

Otra característica importante de una línea de ensamblaje es que cada persona toca cada elemento para hacer su operación y luego esa pieza de datos desaparece. No regresa. La siguiente persona la maneja en ese punto. Esto es diferente de las listas y colas que viste en el capítulo anterior. Con una lista, puedes acceder a cualquier elemento en cualquier momento. Con una cola, estás limitado en qué elementos puedes acceder, pero todos los elementos están allí. Con streams, los datos no se generan de antemano; se crean cuando se necesitan. Esto es un ejemplo de evaluación perezosa, que retrasa la ejecución hasta que es necesario.

Muchas cosas pueden suceder en las estaciones de la línea de ensamblaje a lo largo del camino. En la programación funcional, esto se llama operaciones de stream. Al igual que con la línea de ensamblaje, las operaciones ocurren en una tubería. Alguien tiene que iniciar y terminar el trabajo, y puede haber cualquier número de estaciones en medio. Después de todo, ¡un trabajo con una sola persona no es una línea de ensamblaje! Hay tres partes en una tubería de stream, como se muestra en la Figura 15.2.

- **Fuente**: De dónde viene el stream
- **Operaciones intermedias**: Transforma el stream en otro. Puede haber tan pocas o tantas operaciones intermedias como quieras. Dado que los streams usan evaluación perezosa, las operaciones intermedias no se ejecutan hasta que la operación terminal se ejecuta.
- **Operación terminal**: Produce un resultado. Dado que los streams solo pueden usarse una vez, el stream ya no es válido después de que una operación terminal se completa.

### EJEMPLOS DE FLUJO DE STREAMS

Para ilustrar cómo funcionan los streams en Java, consideremos el siguiente ejemplo:

```java
import java.util.Arrays;
import java.util.List;

public class StreamExample {
    public static void main(String[] args) {
        List<String> animales = Arrays.asList("león", "tigre", "elefante", "jirafa", "cebra");

        animales.stream()
                .filter(animal -> animal.startsWith("j"))
                .map(String::toUpperCase)
                .forEach(System.out::println);
    }
}
```

En este ejemplo:

1. **Fuente**: `animales.stream()` crea un stream a partir de la lista de animales.
2. **Operaciones intermedias**:
   - `.filter(animal -> animal.startsWith("j"))` filtra los animales que comienzan con la letra "j".
   - `.map(String::toUpperCase)` convierte los nombres de los animales filtrados a mayúsculas.
3. **Operación terminal**: `.forEach(System.out::println)` imprime cada nombre de animal en mayúsculas.

La salida de este programa sería:

```
JIRafa
```

### RESUMEN

- **Streams**: Secuencias de datos que permiten realizar operaciones de manera declarativa y funcional.
- **Pipelines**: Conjuntos de operaciones que se ejecutan en un stream para producir un resultado.
- **Fuente**: El origen de los datos en un stream (por ejemplo, una colección).
- **Operaciones intermedias**: Transforman el stream en otro stream y son ejecutadas de manera perezosa.
- **Operación terminal**: Produce un resultado y hace que las operaciones intermedias se ejecuten.

Recuerda que los streams son una herramienta poderosa para manejar y procesar colecciones de datos de manera eficiente y concisa en Java.
